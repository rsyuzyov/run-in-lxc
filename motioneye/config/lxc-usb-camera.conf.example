# Пример настроек LXC для проброса USB-камер
#
# Добавьте эти строки в конфиг контейнера на хосте Proxmox:
# /etc/pve/lxc/<ID>.conf
#
# После изменения перезапустите контейнер:
# pct restart <ID>

# ======================
# Разрешение на доступ к видеоустройствам
# ======================

# Major number 81 = video4linux устройства
lxc.cgroup2.devices.allow: c 81:* rwm

# ======================
# Проброс конкретных камер
# ======================

# Первая камера
lxc.mount.entry: /dev/video0 dev/video0 none bind,optional,create=file

# Вторая камера (если есть)
# lxc.mount.entry: /dev/video1 dev/video1 none bind,optional,create=file

# ======================
# Определение камер на хосте
# ======================

# Выполните на хосте Proxmox для определения устройств:
#
# ls -la /dev/video*
# v4l2-ctl --list-devices
#
# Пример вывода:
# USB Camera (usb-0000:00:14.0-1):
#     /dev/video0
#     /dev/video1
#
# /dev/video0 - обычно основной поток
# /dev/video1 - метаданные (можно не пробрасывать)

# ======================
# Проверка в контейнере
# ======================

# После проброса выполните в контейнере:
#
# ls -la /dev/video*
# v4l2-ctl --list-devices
# v4l2-ctl -d /dev/video0 --all

